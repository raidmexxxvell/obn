<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>–õ–∏–≥–∞ –û–±–Ω–∏–Ω—Å–∫–∞</title>
    <!-- –ò–°–ü–†–ê–í–õ–ï–ù–û: –£–±—Ä–∞–Ω—ã –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã –≤ URL Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script>window.__WEBSOCKETS_ENABLED__ = true; // –≤–∫–ª—é—á–µ–Ω–æ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ–ø–æ–¥–ø–∏—Å–æ–∫</script>
        {# –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ–≤–µ—Ä–ª–µ–π –æ—à–∏–±–æ–∫ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É #}
        {% if admin_user_id %}
        <script>
            (function(){
                const ADMIN_ID = '{{ admin_user_id }}';
                // –ü–æ–ø—ã—Ç–∫–∞ –≤–∑—è—Ç—å user id –∏–∑ Telegram WebApp initData (–¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ sdk)
                function loadOverlay(){
                    try {
                        // –ï—Å–ª–∏ —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ ‚Äî –≤—ã—Ö–æ–¥–∏–º
                        if (window.__ERROR_OVERLAY_INJECTED__) return;
                        const tg = window.Telegram && window.Telegram.WebApp;
                        let uid = null;
                        if (tg && tg.initDataUnsafe && tg.initDataUnsafe.user && tg.initDataUnsafe.user.id){
                            uid = String(tg.initDataUnsafe.user.id);
                        }
                        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π fallback: –∞—Ç—Ä–∏–±—É—Ç body data-user-id (–µ—Å–ª–∏ –ø–æ–∑–∂–µ –¥–æ–±–∞–≤–∏—Ç–µ)
                        if (!uid){
                            try { uid = document.body.getAttribute('data-user-id'); } catch(_){ uid=null; }
                        }
                        if (uid && ADMIN_ID && uid === ADMIN_ID){
                            // –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –≤—Å—Ç–∞–≤–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞
                            if (document.querySelector('script[src*="/static/js/error-overlay.js"]')) { window.__ERROR_OVERLAY_INJECTED__ = true; return; }
                            var s=document.createElement('script');
                            s.id = 'error-overlay-loader';
                            s.src='/static/js/error-overlay.js?v={{ static_version }}';
                            document.head.appendChild(s);
                            window.__ERROR_OVERLAY_INJECTED__ = true;
                        }
                    } catch(_){ /* silent */ }
                }
                // Telegram SDK –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è —á—É—Ç—å –ø–æ–∑–∂–µ ‚Äî –ø—Ä–æ–±—É–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ø—ã—Ç–æ–∫
                let tries=0; const timer=setInterval(()=>{ tries++; loadOverlay(); if(tries>20) clearInterval(timer); }, 300);
                // –¢–∞–∫–∂–µ –ø—Ä–æ–±—É–µ–º —Å—Ä–∞–∑—É
                loadOverlay();
            })();
        </script>
        {% endif %}
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/splash.css">
    <link rel="stylesheet" href="/static/css/blb.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><text y='14' font-size='14'>‚öΩ</text></svg>">
</head>
<body data-admin="{{ admin_user_id }}" class="theme-ufo">
    <!-- –ó–ê–°–¢–ê–í–ö–ê -->
    <div id="splash">
        <img src="/static/img/logo_liga.png" alt="–õ–æ–≥–æ—Ç–∏–ø" class="splash-logo-img">
        <div class="splash-text">–§—É—Ç–±–æ–ª—å–Ω–∞—è –ª–∏–≥–∞ –û–±–Ω–∏–Ω—Å–∫–∞</div>
        <div class="splash-loading-label">–ò–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞...</div>
        <div class="loading-bar">
            <div class="loading-progress" id="loading-progress"></div>
        </div>
    </div>

    <!-- –û–°–ù–û–í–ù–û–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–ï -->
    <!-- –°–∫—Ä—ã–≤–∞–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (—á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –º–∏–≥–∞–Ω–∏—è) -->
    <div class="container" id="app-content" style="display:none;">
        <div class="top-bar">
            <div class="league-title">–õ–∏–≥–∞ –û–±–Ω–∏–Ω—Å–∫–∞</div>
            <img class="league-logo" src="/static/img/logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø –ª–∏–≥–∏">
        </div>
        <!-- –ù–æ–≤–∞—è —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ –ì–ª–∞–≤–Ω–∞—è -->
        <div id="tab-home">
            <div class="ads-wrap">
                <div class="ads-carousel" id="ads-carousel">
                    <div class="ads-track" id="ads-track">
                        <!-- –°–ª–∞–π–¥—ã –Ω–∞–ø–æ–ª–Ω—è—Ç—Å—è —á–µ—Ä–µ–∑ JS; –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–¥–∏–Ω –∑–∞–≥–ª—É—à–µ—á–Ω—ã–π -->
                    </div>
                    <div class="ads-dots" id="ads-dots"></div>
                </div>
            </div>
            <div class="ufo-content" id="home-content">
                <div class="ufo-pane" id="home-pane" style="min-height: 120px; display: flex; align-items: center; justify-content: center; color: var(--gray);">
                    <!-- –ü—É—Å—Ç–æ: —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ –ø–∞–Ω–µ–ª–∏ –ª–∏–≥; –º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∑–∂–µ -->
                </div>
                <!-- –ù–æ–≤–æ—Å—Ç–∏ -->
                <div class="ufo-pane" id="news-pane" style="margin-top:12px;">
                    <h3 style="margin:0 0 10px; font-size:16px; color:var(--text-primary, #fff);">–ù–æ–≤–æ—Å—Ç–∏</h3>
                    <div id="news-list" class="news-list" aria-live="polite">
                        <div class="news-loading" id="news-loading">–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π...</div>
                    </div>
                </div>
            </div>
        </div>
    <div id="tab-profile" style="display:none;">
    <div class="profile-top-area" id="profile-top-area">
    <div class="shade-bg" id="shade-bg" aria-hidden="true"></div>
    <div class="profile-header profile-centered">
            <div class="profile-avatar" id="user-avatar">
                <img src="" alt="–ê–≤–∞—Ç–∞—Ä">
            </div>
            <div class="profile-info">
                <div style="display:flex; align-items:center; justify-content:center; gap:8px;">
                    <h2 id="user-name">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                    <button id="profile-shade-btn" class="profile-shade-btn" title="–í—ã–±—Ä–∞—Ç—å —Ñ–æ–Ω –ø—Ä–æ—Ñ–∏–ª—è" aria-label="–í—ã–±—Ä–∞—Ç—å —Ñ–æ–Ω"></button>
                </div>
                <div class="favorite-team-row" style="margin-top:6px;">
                    <label for="favorite-team" style="font-size:12px; color:var(--gray); margin-right:8px;">–õ—é–±–∏–º—ã–π –∫–ª—É–±:</label>
                    <select id="favorite-team" style="min-width:160px; max-width:240px;"><option value="">‚Äî –≤—ã–±—Ä–∞—Ç—å ‚Äî</option></select>
                </div>
            </div>
        </div>
        </div>

        <div class="profile-stats">
            <div class="stat-card">
                <div class="stat-value" id="credits">0</div>
                <div class="stat-label">–ö—Ä–µ–¥–∏—Ç—ã</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="level">1</div>
                <div class="stat-label">–£—Ä–æ–≤–µ–Ω—å</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="xp">0/100</div>
                <div class="stat-label">–û–ø—ã—Ç</div>
            </div>
        </div>
    <div class="xp-section">
            <div class="level-info">
                <span>–£—Ä–æ–≤–µ–Ω—å <span id="current-level">1</span></span>
                <span><span id="current-xp">0</span>/<span id="xp-needed">100</span> XP</span>
            </div>
            <div class="xp-progress-container">
                <div class="xp-progress" id="xp-progress"></div>
            </div>
        </div>

        <div class="checkin-section">
            <div class="checkin-title">
                <span>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã</span>
                <span id="streak-days">–î–µ–Ω—å <span id="current-streak">1</span></span>
            </div>
            <div class="checkin-days" id="checkin-days">
                <!-- –î–Ω–∏ —Ü–∏–∫–ª–∞ –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã JS -->
            </div>
            <button class="checkin-button" id="checkin-btn">–ü–æ–ª—É—á–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É</button>
            <div class="checkin-status" id="checkin-status"></div>
        </div>

    <div class="achievements-section">
            <div class="subtabs" id="profile-subtabs">
                <div class="subtab-item active" data-psub="badges">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</div>
                <div class="subtab-item" data-psub="ref">–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞</div>
            </div>
            <div id="profile-pane-badges" class="profile-pane">
            <div class="achievements-container" id="badges">
                <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–æ —á–µ—Ä–µ–∑ API -->
                <div class="achievement-card locked" id="achievement-placeholder">
                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM4ODg4ODgiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBjbGFzcz0iZmVhdGhlciBmZWF0aGVyLXRyb2Z5Ij48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIvPjxwb2x5bGluZSBwb2ludHM9IjEyIDYgMTYgMTQgMTIgMTAgOCAxNCAxMiA2Ii8+PC9zdmc+" alt="–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ">
                    <div class="badge-name">–ë—Ä–æ–Ω–∑–∞</div>
                    <div class="badge-requirements">7 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥</div>
                </div>
            </div>
            </div>
            
            <div id="profile-pane-ref" class="profile-pane" style="display:none;">
                <div class="referral-box">
                    <button class="share-btn" id="share-ref">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π</button>
                    <div class="ref-stats">–ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ: <span id="ref-count">0</span></div>
                    <div class="ref-note" id="ref-note">–ó–∞—á—ë—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω—ã–π –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç 2 —É—Ä–æ–≤–Ω—è –∞–∫–∫–∞—É–Ω—Ç–∞.</div>
                </div>
            </div>
        </div>
        </div>

        <!-- Shade selection modal -->
    <div id="shade-modal" class="modal" style="display:none;">
        <div class="modal-backdrop" data-close="true"></div>
        <div class="modal-dialog" role="dialog" aria-labelledby="shade-modal-title" aria-modal="true">
            <div class="modal-title" id="shade-modal-title">–í—ã–±–æ—Ä —Ñ–æ–Ω–∞ –ø—Ä–æ—Ñ–∏–ª—è</div>
            <div class="modal-desc">–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ñ–æ–Ω–æ–≤.</div>
            <div id="shade-list" style="display:flex; gap:8px; margin-top:10px; overflow-x:auto; padding-bottom:6px;"></div>
            <div class="modal-actions">
                <button id="shade-cancel" class="btn btn-secondary" type="button">–ó–∞–∫—Ä—ã—Ç—å</button>
                <button id="shade-set" class="btn btn-primary" type="button">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–æ–Ω</button>
            </div>
        </div>
    </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –ù–õ–û -->
    <div id="tab-ufo" style="display:none;">
            <!-- –ü–æ–¥–≤–∫–ª–∞–¥–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–π –ª–∏–≥–∏ –ù–õ–û -->
            <div class="subtabs" id="ufo-subtabs">
                <div class="subtab-item active" data-subtab="table">–¢–∞–±–ª–∏—Ü–∞</div>
                <div class="subtab-item" data-subtab="stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
                <div class="subtab-item" data-subtab="schedule">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</div>
                <div class="subtab-item" data-subtab="results">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</div>
            </div>
            <div class="ufo-content" id="ufo-content">
                <div id="ufo-table" class="ufo-pane">
                    <div class="league-table-wrap">
                        <table class="league-table" id="league-table">
                            <tbody>
                                <!-- 10 —Å—Ç—Ä–æ–∫ –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                            </tbody>
                        </table>
                        <div class="table-updated" id="league-table-updated">
                            <span id="league-updated-text"></span>
                            {% if admin_user_id %}
                            <button class="refresh-btn" id="league-refresh-btn" style="display:none;">–û–±–Ω–æ–≤–∏—Ç—å</button>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div id="ufo-stats" class="ufo-pane" style="display:none;">
                    <div class="league-table-wrap">
                        <table class="league-table" id="stats-table">
                            <tbody>
                                <!-- 11 —Å—Ç—Ä–æ–∫ –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                            </tbody>
                        </table>
                        <div class="table-updated" id="stats-table-updated"></div>
                    </div>
                </div>
                <div id="ufo-schedule" class="ufo-pane" style="display:none;">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è...</div>
                <div id="ufo-results" class="ufo-pane" style="display:none;">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤...</div>
                <!-- –î–µ—Ç–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω –º–∞—Ç—á–∞ (–≤–º–µ—Å—Ç–æ –º–æ–¥–∞–ª–∫–∏) -->
                <div id="ufo-match-details" class="ufo-pane" style="display:none;">
                    <div class="match-details-topbar">
                        <button id="match-back" class="back-btn">‚Üê –ù–∞–∑–∞–¥</button>
                        <div class="md-title">–î–µ—Ç–∞–ª–∏ –º–∞—Ç—á–∞</div>
                    </div>
                    <div class="match-modal-header">
                        <div class="team side home">
                            <img class="logo" id="md-home-logo" alt="">
                            <div class="name" id="md-home-name"></div>
                        </div>
                        <div class="center">
                            <div class="score" id="md-score">‚Äî : ‚Äî</div>
                            <div class="datetime" id="md-datetime"></div>
                        </div>
                        <div class="team side away">
                            <img class="logo" id="md-away-logo" alt="">
                            <div class="name" id="md-away-name"></div>
                        </div>
                    </div>
                    <div class="subtabs modal-subtabs">
                        <div class="subtab-item active" data-mdtab="home">–ö–æ–º–∞–Ω–¥–∞ 1</div>
                        <div class="subtab-item" data-mdtab="away">–ö–æ–º–∞–Ω–¥–∞ 2</div>
                    </div>
                    <div class="modal-body">
                        <div id="md-pane-home" class="md-pane"></div>
                        <div id="md-pane-away" class="md-pane" style="display:none;"></div>
                    </div>
                </div>
            </div>

            <!-- –ë–ª–æ–∫ –ë–õ–ë: –ø—É—Å—Ç—ã–µ –ø–æ–¥–≤–∫–ª–∞–¥–∫–∏ -->
            <div id="blb-block" style="display:none;">
                <div class="subtabs" id="blb-subtabs">
                    <div class="subtab-item active" data-blbtab="table">–¢–∞–±–ª–∏—Ü–∞</div>
                    <div class="subtab-item" data-blbtab="stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
                    <div class="subtab-item" data-blbtab="schedule">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</div>
                    <div class="subtab-item" data-blbtab="results">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</div>
                </div>
                <div class="ufo-content" id="blb-content">
                    <div id="blb-table" class="ufo-pane">–°–∫–æ—Ä–æ...</div>
                    <div id="blb-stats" class="ufo-pane" style="display:none;">–°–∫–æ—Ä–æ...</div>
                    <div id="blb-schedule" class="ufo-pane" style="display:none;">–°–∫–æ—Ä–æ...</div>
                    <div id="blb-results" class="ufo-pane" style="display:none;">–°–∫–æ—Ä–æ...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="nav" id="bottom-nav">
        <div class="nav-league-panel" id="nav-league-panel" aria-hidden="true">
            <button class="nav-league-btn" id="nav-league-switch" type="button">
                <span class="icon" id="nav-league-icon">üõ∏</span>
                <span class="text" id="nav-league-text">–ù–õ–û</span>
            </button>
        </div>
        <div class="nav-item active" data-tab="home">
            <div class="nav-icon">üè†</div>
            <div class="nav-label">–ì–ª–∞–≤–Ω–∞—è</div>
        </div>
        <div class="nav-item" data-tab="ufo">
            <div class="nav-icon">üõ∏</div>
            <div class="nav-label">–õ–∏–≥–∞</div>
        </div>
        <div class="nav-item" data-tab="predictions">
            <div class="nav-icon">üìà</div>
            <div class="nav-label">–ü—Ä–æ–≥–Ω–æ–∑—ã</div>
        </div>
        <div class="nav-item" data-tab="leaderboard">
            <div class="nav-icon">üèÜ</div>
            <div class="nav-label">–õ–∏–¥–µ—Ä–±–æ—Ä–¥</div>
        </div>
        <div class="nav-item" data-tab="shop">
            <div class="nav-icon">üõí</div>
            <div class="nav-label">–ú–∞–≥–∞–∑–∏–Ω</div>
        </div>
        {% if admin_user_id %}
        <div class="nav-item" data-tab="admin" id="nav-admin" style="display:none;">
            <div class="nav-icon">üõ†Ô∏è</div>
            <div class="nav-label">–ê–¥–º–∏–Ω</div>
        </div>
        {% endif %}
        <div class="nav-item" data-tab="profile">
            <div class="nav-icon">üë§</div>
            <div class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</div>
        </div>
    </nav>

    <!-- Name change modal removed ‚Äî name is read-only and taken from Telegram -->

    <!-- –û–≤–µ—Ä–ª–µ–π –≤—ã–±–æ—Ä–∞ –ª–∏–≥ –Ω–∞–¥ –Ω–∏–∂–Ω–∏–º –º–µ–Ω—é -->
    <div id="league-overlay" style="display:none; position: fixed; left: 0; bottom: 0; z-index: 1100;">
        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –ø–ª–∞—à–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç JS -->
    </div>

    <!-- –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é –ª–∏–≥ -->
    <aside id="league-drawer" aria-hidden="true" style="display:none; position: fixed; top: 0; right: 0; bottom: 0; width: 78%; max-width: 360px; background: rgba(10,18,40,0.98); border-left: 1px solid rgba(255,255,255,0.08); box-shadow: -12px 0 24px rgba(0,0,0,0.45); transform: translateX(100%); transition: transform .28s ease-out; z-index: 1500;">
        <div class="drawer-header" style="padding: 14px 14px 8px; font-weight: 800; font-size: 16px;">–§—É—Ç–±–æ–ª</div>
        <div class="drawer-sep" style="height: 1px; background: rgba(255,255,255,0.08);"></div>
        <div class="drawer-list" id="league-drawer-list" style="padding: 8px; display: grid; gap: 8px;">
            <button class="drawer-item" data-league="UFO" style="display:flex; align-items:center; gap:10px; padding:10px 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.08); color:#fff; border-radius: 10px; font-weight: 800; cursor:pointer;">üõ∏ <span>–ù–õ–û</span></button>
            <button class="drawer-item" data-league="BLB" style="display:flex; align-items:center; gap:10px; padding:10px 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.08); color:#fff; border-radius: 10px; font-weight: 800; cursor:pointer;">‚ùî <span>–ë–õ–ë</span></button>
        </div>
    </aside>

    <!-- –≠–∫—Ä–∞–Ω –ø–µ—Ä–µ—Ö–æ–¥–∞ –º–µ–∂–¥—É –ª–∏–≥–∞–º–∏ (–∞–Ω–∏–º–∞—Ü–∏—è –∑–∞–ª–∏–≤–∫–∏ –∏ –ª–æ–≥–æ—Ç–∏–ø) -->
    <div id="league-transition" style="display:none;">
        <!-- –Ω–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
    </div>

    <!-- –û–≤–µ—Ä–ª–µ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ª–∞–Ω–¥—à–∞—Ñ—Ç–Ω–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö -->
    <div class="orientation-overlay" id="orientation-overlay" aria-hidden="true">
        <div class="orientation-inner">
            –ü–æ–≤–µ—Ä–Ω–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤ –ø–æ—Ä—Ç—Ä–µ—Ç–Ω—ã–π —Ä–µ–∂–∏–º
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω—ã-–∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –≤–∫–ª–∞–¥–æ–∫ -->
    <div id="tab-predictions" style="display:none;">
        <div class="predictions-wrap">
            <div class="subtabs" id="pred-subtabs">
                <div class="subtab-item active" data-ptab="place">–°–¥–µ–ª–∞—Ç—å –ø—Ä–æ–≥–Ω–æ–∑</div>
                <div class="subtab-item" data-ptab="mybets">–ú–æ–∏ —Å—Ç–∞–≤–∫–∏</div>
            </div>
            <div id="pred-pane-place" class="pred-pane">
                <div class="pred-tours" id="pred-tours">–ó–∞–≥—Ä—É–∑–∫–∞ –º–∞—Ç—á–µ–π...</div>
            </div>
            <div id="pred-pane-mybets" class="pred-pane" style="display:none;">
                <div class="my-bets" id="my-bets">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>
    </div>
    <div id="tab-leaderboard" style="display:none;">
        <div class="leaderboard-wrap">
            <div class="subtabs" id="leader-subtabs">
                <div class="subtab-item active" data-ltab="predictors">–¢–æ–ø –ø—Ä–æ–≥–Ω–æ–∑–∏—Å—Ç–æ–≤</div>
                <div class="subtab-item" data-ltab="rich">–õ–∏–¥–µ—Ä—ã –º–µ—Å—è—Ü–∞</div>
                <div class="subtab-item" data-ltab="server">–õ–∏–¥–µ—Ä—ã —Å–µ—Ä–≤–µ—Ä–∞</div>
                <div class="subtab-item" data-ltab="prizes">–ü—Ä–∏–∑—ã</div>
            </div>
            <div id="leader-week-badge" class="leader-week-badge" style="text-align:center; color: var(--gray); font-size: 12px; margin: 4px 0 0;">–ü–µ—Ä–∏–æ–¥: ‚Äî</div>
            <div id="leader-pane-predictors" class="leader-pane">
                <div class="league-table-wrap">
                    <table class="league-table" id="lb-predictors">
                        <thead>
                            <tr><th>#</th><th>–ò–º—è</th><th>–°—Ç–∞–≤–æ–∫</th><th>–í—ã–∏–≥—Ä—ã—à–µ–π</th><th>Win%</th></tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                    <div class="table-updated" id="lb-predictors-updated"></div>
                </div>
            </div>
            <div id="leader-pane-rich" class="leader-pane" style="display:none;">
                <div class="league-table-wrap">
                    <table class="league-table" id="lb-rich">
                        <thead>
                            <tr><th>#</th><th>–ò–º—è</th><th>–ü—Ä–∏—Ä–æ—Å—Ç</th></tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                    <div class="table-updated" id="lb-rich-updated"></div>
                </div>
            </div>
            <div id="leader-pane-server" class="leader-pane" style="display:none;">
                <div class="league-table-wrap">
                    <table class="league-table" id="lb-server">
                        <thead>
                            <tr><th>#</th><th>–ò–º—è</th><th>–£—Ä–æ–≤–µ–Ω—å</th><th>XP</th><th>–°–µ—Ä–∏—è</th><th>–°–∫–æ—Ä</th></tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                    <div class="table-updated" id="lb-server-updated"></div>
                </div>
            </div>
            <div id="leader-pane-prizes" class="leader-pane" style="display:none;">
                <div class="prizes-wrap" id="lb-prizes">
                    <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –ø—å–µ–¥–µ—Å—Ç–∞–ª—ã —Ç—Ä–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
                </div>
                <div class="table-updated" id="lb-prizes-updated"></div>
            </div>
        </div>
    </div>

    {% if admin_user_id %}
    <!-- –í–∫–ª–∞–¥–∫–∞ –ê–¥–º–∏–Ω (—Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü; –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ ID) -->
    <div id="tab-admin" style="display:none;">
        <div class="predictions-wrap">
            <div class="subtabs" id="admin-subtabs">
                <div class="subtab-item active" data-atab="service">–°–µ—Ä–≤–∏—Å</div>
                <div class="subtab-item" data-atab="stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
                <div class="subtab-item" data-atab="orders">–ó–∞–∫–∞–∑—ã</div>
                <div class="subtab-item" data-atab="streams">–¢—Ä–∞–Ω—Å–ª—è—Ü–∏–∏</div>
            </div>
            <div id="admin-pane-service" class="pred-pane">
                <div class="store-grid" style="grid-template-columns: repeat(2, minmax(0,1fr));">
                    <div class="store-item">
                        <div class="store-name">–û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã</div>
                        <div class="store-price" style="opacity:.8">–õ–∏–≥–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</div>
                        <button class="details-btn" id="admin-refresh-all">–û–±–Ω–æ–≤–∏—Ç—å</button>
                    </div>
                    <div class="store-item">
                        <div class="store-name">–°–±—Ä–æ—Å –∫—ç—à–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤</div>
                        <div class="store-price">–í–µ—Ä—Å–∏—è up</div>
                        <button class="details-btn" id="admin-bump-version">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                    </div>
                    <div class="store-item">
                        <div class="store-name">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</div>
                        <div class="store-price" id="admin-sync-summary">‚Äî</div>
                        <button class="details-btn" id="admin-sync-refresh">–ü–æ–∫–∞–∑–∞—Ç—å</button>
                    </div>
                </div>
            </div>
            <div id="admin-pane-stats" class="pred-pane" style="display:none;">
                <div style="display:flex; gap:8px; align-items:center; margin-bottom:8px; flex-wrap:wrap;">
                    <button class="details-btn" id="admin-stats-refresh">–û–±–Ω–æ–≤–∏—Ç—å</button>
                    <div class="table-updated" id="admin-stats-updated"></div>
                </div>
                <div class="league-table-wrap">
                    <table class="league-table" id="admin-stats-table">
                        <thead>
                            <tr>
                                <th>–ú–µ—Ç—Ä–∏–∫–∞</th>
                                <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- —Å—Ç—Ä–æ–∫–∏ –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –∏–∑ JS -->
                        </tbody>
                    </table>
                </div>
            </div>
            <div id="admin-pane-orders" class="pred-pane" style="display:none;">
                <div class="league-table-wrap">
                    <table class="league-table" id="admin-orders-table">
                        <thead>
                            <tr>
                                <th>‚Ññ</th>
                                <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                                <th>–¢–æ–≤–∞—Ä—ã</th>
                                <th>–®—Ç</th>
                                <th>–°—É–º–º–∞</th>
                                <th>–°–æ–∑–¥–∞–Ω</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>‚úñ</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                    <div class="table-updated" id="admin-orders-updated"></div>
                </div>
            </div>
            <div id="admin-pane-streams" class="pred-pane" style="display:none;">
                <div class="store-grid" id="admin-streams-list" style="grid-template-columns: 1fr; gap: 8px;">
                    <div class="store-item" style="opacity:.85">
                        <div class="store-name">–ó–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è –º–∞—Ç—á–∏ –∑–∞ 60 –º–∏–Ω—É—Ç –¥–æ –Ω–∞—á–∞–ª–∞</div>
                        <div class="store-price">–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ç—á, –≤—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É VK –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ</div>
                    </div>
                </div>
                <div style="display:flex; gap:8px; margin-top:12px; align-items:center; flex-wrap:wrap;">
                    <button class="details-btn" id="admin-streams-refresh">–û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫</button>
                    <label style="font-size:12px; color:var(--gray); display:flex; align-items:center; gap:6px;">–û–∫–Ω–æ (–º–∏–Ω—É—Ç): <input id="admin-streams-window" type="number" min="60" max="480" value="360" style="width:80px; padding:6px 8px; border-radius:8px; border:1px solid rgba(255,255,255,.2); background:transparent; color:#fff;"></label>
                </div>
                <div id="admin-streams-msg" style="margin-top:8px; font-size:12px; color: var(--gray);"></div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- –í–∫–ª–∞–¥–∫–∞ –ú–∞–≥–∞–∑–∏–Ω -->
    <div id="tab-shop" style="display:none;">
        <div class="predictions-wrap">
            <div class="subtabs" id="shop-subtabs">
                <div class="subtab-item active" data-stab="store">–ú–∞–≥–∞–∑–∏–Ω</div>
                <div class="subtab-item" data-stab="cart">–ö–æ—Ä–∑–∏–Ω–∞</div>
                <div class="subtab-item" data-stab="myorders">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</div>
            </div>
            <div id="shop-pane-store" class="pred-pane">
                <div class="store-grid">
                    <div class="store-item" data-id="boots" data-name="–ë—É—Ç—Å—ã" data-price="500">
                        <div class="store-img"><img src="/static/img/shop/boots.png" alt="–ë—É—Ç—Å—ã" loading="lazy" onerror="this.style.display='none'"></div>
                        <div class="store-name">–ë—É—Ç—Å—ã</div>
                        <div class="store-price">500 –∫—Ä–µ–¥–∏—Ç–æ–≤</div>
                        <button class="details-btn">–ö—É–ø–∏—Ç—å</button>
                    </div>
                    <div class="store-item" data-id="ball" data-name="–ú—è—á" data-price="500">
                        <div class="store-img"><img src="/static/img/shop/ball.png" alt="–ú—è—á" loading="lazy" onerror="this.style.display='none'"></div>
                        <div class="store-name">–ú—è—á</div>
                        <div class="store-price">500 –∫—Ä–µ–¥–∏—Ç–æ–≤</div>
                        <button class="details-btn">–ö—É–ø–∏—Ç—å</button>
                    </div>
                    <div class="store-item" data-id="tshirt" data-name="–§—É—Ç–±–æ–ª–∫–∞" data-price="500">
                        <div class="store-img"><img src="/static/img/shop/tshirt.png" alt="–§—É—Ç–±–æ–ª–∫–∞" loading="lazy" onerror="this.style.display='none'"></div>
                        <div class="store-name">–§—É—Ç–±–æ–ª–∫–∞</div>
                        <div class="store-price">500 –∫—Ä–µ–¥–∏—Ç–æ–≤</div>
                        <button class="details-btn">–ö—É–ø–∏—Ç—å</button>
                    </div>
                    <div class="store-item" data-id="cap" data-name="–ö–µ–ø–∫–∞" data-price="500">
                        <div class="store-img"><img src="/static/img/shop/cap.png" alt="–ö–µ–ø–∫–∞" loading="lazy" onerror="this.style.display='none'"></div>
                        <div class="store-name">–ö–µ–ø–∫–∞</div>
                        <div class="store-price">500 –∫—Ä–µ–¥–∏—Ç–æ–≤</div>
                        <button class="details-btn">–ö—É–ø–∏—Ç—å</button>
                    </div>
                </div>
            </div>
            <div id="shop-pane-cart" class="pred-pane" style="display:none;">
                <div style="padding:12px; color: var(--gray);">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞.</div>
            </div>
            <div id="shop-pane-myorders" class="pred-pane" style="display:none;">
                <div style="padding:12px; color: var(--gray);">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>
    </div>

    <script src="/static/js/team-utils.js"></script>
    <script src="/static/js/match-utils.js"></script>
    <script src="/static/js/animations.js"></script>
    <script src="/static/js/splash.js"></script>
    <script src="/static/js/telegram-patch.js"></script>
    <script src="/static/js/league.js"></script>
    <script src="/static/js/shop.js"></script>
    <script src="/static/js/admin.js"></script>
    <script src="/static/js/profile-user.js"></script>
    <script src="/static/js/profile-achievements.js"></script>
    <script src="/static/js/profile-checkin.js"></script>
    <script src="/static/js/profile-live.js"></script>
    <script src="/static/js/profile-match-roster-events.js"></script>
    <script src="/static/js/profile-match-advanced.js"></script>
    <script src="/static/js/profile-match-live-score.js"></script>
    <script src="/static/js/profile-match-admin.js"></script>
    <script src="/static/js/profile-match-stats.js"></script>
    <script src="/static/js/profile-match-specials.js"></script>
    <script src="/static/js/profile-match-stream.js"></script>
    <script src="/static/js/profile-referral.js"></script>
    <script src="/static/js/profile-ads-featured.js"></script>
    <script src="/static/js/profile-core.js"></script>
    <script src="/static/js/profile.js"></script>
    <script src="/static/js/profile-scorers.js"></script>
    <script src="/static/js/nav-fallback.js"></script>
    <script src="/static/js/streams.js"></script>
    <script src="/static/js/predictions.js"></script>
    <!-- Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket -->
    <script src="/static/js/realtime-updates.js"></script>
    <!-- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–ø–æ–¥–ø–∏—Å–æ–∫ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π -->
    <script src="/static/js/subscription-client.js"></script>
        <script>
        // Fallback –Ω–∞–≤–∏–≥–∞—Ü–∏–∏: –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è, –µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª (–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –º–æ–±–∏–ª—å–Ω—ã–µ WebView —Å—Ä–µ–∑–∞—é—Ç –æ—à–∏–±–∫–∏)
        (function(){
            try {
                if (window.__NAV_FALLBACK_INIT__) return; // —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
                const nav = document.querySelectorAll('.nav-item');
                // –µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –Ω–µ –≤—ã—Å—Ç–∞–≤–∏–ª–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –º–∞—Ä–∫–µ—Ä
                if (!window.ProfileLive && nav.length) {
                    window.__NAV_FALLBACK_INIT__ = true;
                    nav.forEach(it => {
                        it.addEventListener('click', () => {
                            try {
                                document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
                                it.classList.add('active');
                                const tab = it.getAttribute('data-tab');
                                ['home','ufo','predictions','leaderboard','shop','admin','profile'].forEach(id=>{
                                    const el = document.getElementById('tab-'+id); if(el) el.style.display = (tab===id?'':'none');
                                });
                            } catch(e) { console.warn('Fallback nav error', e); }
                        }, { passive:true });
                    });
                }
            } catch(e) {}
        })();
        </script>

</body>
</html>